/************************************************************/
/* i2c.h													*/
/* Library for the I2C module of dspic33E			 		*/
/*															*/
/* MCU : dspic33E											*/
/*															*/
/* Author : David Khouya									*/
/* Date	  :	xx/1/2012										*/
/* Version: 1.0 											*/
/************************************************************/

/************************************************************/
#ifndef I2C_MODULE
#define I2C_MODULE
/************************************************************/

/************************************************************/
/*						   INCLUDES			 				*/
/************************************************************/
#include"p33EP512MC806.h"
#include "globaldef.h"
#include "hardware_profile.h"
/************************************************************/

/************************************************************/
/*			           MACRO DEFINITIONS			 		*/
/************************************************************/
/*Should be in hardware profil definitions*/
#ifndef CPU_CLOCK
#define CPU_CLOCK 				20000000.0f
#endif

/*Macro for I2C bus speed calculation*/
#define I2CSPEED(DESIREDSPEED)  ((1.0f/((1.0f/(CPU_CLOCK/2.0f))*(DESIREDSPEED)))-1.0f)
	
/*Number of I2C interfaces*/
#define NB_I2C					2

/*Interface for user*/
#define I2C_1					0
#define I2C_2					1

/************************************************************/


/************************************************************/
/*			        STRUCTURE DEFINITIONS			 		*/
/************************************************************/

/************************************************************/


/************************************************************/
/*			          PUBLIC VARIABLES			 			*/
/************************************************************/

/************************************************************/


/************************************************************/
/*			         PRIVATE VARIABLES			 			*/
/************************************************************/

/************************************************************/


/************************************************************/
/*				     PUBLIC PROTOTYPES			 			*/
/************************************************************/
bool I2C_Init(uint8 ubI2cNo, float fSpeed);
bool I2C_Send(uint8 ubAddress,uint8 ubRegister,uint8 ubData, uint8 ubI2cNo);
bool I2C_Receive(uint8 ubAddressWrite,uint8 ubAddressRead,uint8 ubRegister,uint8* ubData, uint8 ubI2cNo);
/************************************************************/

/************************************************************/
#endif
/************************************************************/